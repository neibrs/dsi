id: ende_user_xls
label: 恩德用户(xls)
migration_tags: { }
source:
  plugin: xls_plus
  header_row: 1
  path: modules/dsi/industry/dsi_lawyer/data/OrgPerson.xlsx
  sheet_name: 人员
  keys:
    - 账号
  columns:
    -
      账号: 账号
    -
      密码: 密码
    -
      姓名: 姓名
process:
  name: 账号
  pass:
    plugin: callback
    callable: md5
    source: 密码

  person:
    -
      plugin: callback
      source: 人员
      callable: trim
    -
      plugin: skip_on_empty
      method: process
    -
      plugin: entity_lookup
      entity_type: person
      value_key: name
      not_found_message: 人员未找到
  roles:
    -
      plugin: default_value
      default_value: 'authenticated'

  status:
    plugin: default_value
    default_value: 1
destination:
  plugin: entity:user
  md5_passwords: true
migration_dependencies: { }
